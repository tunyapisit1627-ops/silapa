@model news // แทนที่ด้วย namespace/Model จริงของคุณ

@{
    ViewData["Title"] = Model.titlename;
    // คุณอาจต้องรวม CSS สำหรับการแสดงผลที่สวยงาม เช่น Bootstrap, FontAwesome
}

<style>
    /* CSS สำหรับหน้า Details ที่เรียบง่าย */
    .news-detail-container {
        padding: 40px 0;
        max-width: 1000px;
        margin: 0 auto;
    }

    .detail-header {
        text-align: center;
        margin-bottom: 30px;
    }

    .detail-title {
        color: #333;
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 10px;
    }

    .detail-meta {
        color: #6c757d;
        font-size: 0.9rem;
    }

    .detail-content {
        margin-top: 30px;
        line-height: 1.8;
        font-size: 1.05rem;
    }

    /* สไตล์สำหรับรูปภาพหน้าปก */
    .cover-image {
        width: 100%;
        height: 400px;
        background-size: cover;
        background-position: center;
        border-radius: 8px;
        margin-bottom: 30px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    /* สไตล์สำหรับแกลเลอรีรูปภาพ (Gallery) */
    .image-gallery {
        margin-top: 50px;
        border-top: 2px solid #eee;
        padding-top: 30px;
    }

    .gallery-title {
        font-size: 1.8rem;
        color: #495057;
        margin-bottom: 20px;
    }

    .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 15px;
    }

    .gallery-item {
        overflow: hidden;
        border-radius: 6px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        /* เพิ่ม cursor เพื่อบอกว่าคลิกได้ */
    }

    .gallery-item img {
        width: 100%;
        height: 180px;
        /* กำหนดขนาดให้เท่ากัน */
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .gallery-item:hover img {
        transform: scale(1.05);
    }

    /* สไตล์สำหรับปุ่มกลับ */
    .back-btn {
        margin-top: 40px;
        display: inline-block;
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        text-decoration: none;
        border-radius: 5px;
        transition: background-color 0.3s;
    }

    .back-btn:hover {
        background-color: #0056b3;
    }

    @@media
    (max-width: 768px) {

        /* เพิ่ม Padding ด้านข้างให้คอนเทนต์ไม่ชิดขอบจอ */
        .news-detail-container {
            padding: 20px 15px;
            /* ลด Padding บนมือถือ */
        }

        /* ปรับขนาดตัวอักษรของหัวข้อให้เล็กลง */
        .detail-title {
            font-size: 1.8rem;
        }

        /* ปรับขนาดรูปภาพหน้าปกให้เหมาะสม */
        .cover-image {
            height: 250px;
        }

        /* ปรับให้รูปภาพในแกลเลอรีใหญ่ขึ้นหน่อยบนมือถือ */
        .gallery-grid {
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
        }

        .gallery-item img {
            height: 150px;
        }
    }
</style>

<div class="news-detail-container">

    <div class="detail-header">
        <div class="detail-meta">
            <span class="badge @Model.BadgeClass">@Model.BadgeText</span>
            <span>หมวดหมู่: @Model.Category</span> |
            <span>เผยแพร่เมื่อ: @Model.lastupdate?.ToString("dd MMMM yyyy", new
                                System.Globalization.CultureInfo("th-TH"))</span>
        </div>
        <h1 class="detail-title">@Model.titlename</h1>
    </div>

    @* 1. แสดงรูปภาพหน้าปก *@
    @if (!string.IsNullOrEmpty(Model.CoverImageUrl))
    {
        <div class="cover-image" style="background-image: url(/@Model.CoverImageUrl);"></div>
    }

    @* 2. แสดงรายละเอียดข่าว (Rich Text จาก Summernote) *@
    <div class="detail-content">
        @Html.Raw(Model.details)
    </div>

    @* 3. แสดงแกลเลอรีรูปภาพ (ถ้ามี) *@
    @if (Model.GalleryImages != null && Model.GalleryImages.Any())
    {
        <div class="image-gallery">
            <h3 class="gallery-title">แกลเลอรีรูปภาพเพิ่มเติม</h3>
            <div class="gallery-grid">
                @foreach (var image in Model.GalleryImages.OrderBy(i => i.ImageId))
                {
                    <div class="gallery-item">
                        <img src="/@image.ImageUrl" alt="@image.FileName" data-toggle="modal" data-target="#imageModal"
                            onclick="showImageModal('/@image.ImageUrl')">
                    </div>
                }
            </div>
        </div>
    }

    <a asp-action="frmnewsAll" asp-controller="Home" class="back-btn">← กลับสู่หน้าข่าวทั้งหมด</a>

</div>

@* Modal สำหรับการแสดงรูปภาพขนาดใหญ่ (Optional: ต้องใช้ Bootstrap JS) *@
<div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-labelledby="imageModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-body text-center">
                <img id="modalImage" src="" class="img-fluid" style="max-height: 80vh;">
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function showImageModal(imageUrl) {
            $('#modalImage').attr('src', imageUrl);
            $('#imageModal').modal('show');
        }

        // (ตรวจสอบให้แน่ใจว่าคุณได้ลิงก์ไฟล์ Bootstrap/jQuery ใน _Layout.cshtml แล้ว)
    </script>
}