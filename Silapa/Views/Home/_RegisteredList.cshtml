@model IEnumerable<Registerhead>

<div class="table-responsive">
@if (Model == null || !Model.Any())
{
    <div class="alert alert-warning text-center">‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
}
else
{
    <div class="row mb-3">
        <div class="col-12">
            <input type="text" id="searchRegistered" class="form-control" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô/‡∏Ñ‡∏£‡∏π...">
        </div>
    </div>
    @* ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• *@
    @foreach (var schoolGroup in Model.GroupBy(h => h.School.Name).OrderBy(g => g.Key))
    {
        <h5 class="mt-3 mb-2 school-header" data-school-name="@schoolGroup.Key">üè´ @schoolGroup.Key</h5>
        <table class="table table-bordered table-striped table-sm mb-4 registered-table">
            <thead>
                <tr>
                    <th style="width: 5%;">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
                    <th style="width: 15%;">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                    <th style="width: 45%;">‡∏ä‡∏∑‡πà‡∏≠ - ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                    <th style="width: 35%;">‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á/‡∏ä‡∏±‡πâ‡∏ô</th>
                </tr>
            </thead>
            <tbody class="registered-tbody">
                @{
                    int counter = 1;
                    // ‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏≤‡∏Å‡∏´‡∏±‡∏ß‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Ç‡∏≠‡∏á‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ô‡∏µ‡πâ
                    // ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á ‡∏Ñ‡∏£‡∏π (teacher) ‡∏Ç‡∏∂‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô ‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (student)
                    var allDetails = schoolGroup.SelectMany(h => h.Registerdetail)
                                                .OrderBy(rd => rd.Type) 
                                                .ToList();
                }
                @foreach (var detail in allDetails)
                {
                    <tr>
                        <td class="text-center">@(counter++)</td>
                        <td>
                            @if (detail.Type == "teacher")
                            {
                                <span class="badge bg-success">‡∏Ñ‡∏£‡∏π‡∏ù‡∏∂‡∏Å‡∏ã‡πâ‡∏≠‡∏°</span>
                            }
                            else
                            {
                                <span class="badge bg-primary">‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</span>
                            }
                        </td>
                        <td>@detail.Prefix@detail.FirstName @detail.LastName</td>
                        <td>@detail.Type</td> 
                    </tr>
                }
            </tbody>
        </table>
    }
}
</div>